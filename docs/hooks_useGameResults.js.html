<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: hooks/useGameResults.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: hooks/useGameResults.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState, useEffect } from "react";

const GAME_RESULTS_KEY_PREFIX = "gameResults_";

/**
 * –•—É–∫ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≥—Ä–∏ —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ LocalStorage.
 * –í—Ä–∞—Ö–æ–≤—É—î –ø–æ–ª—ñ—Ç–∏–∫—É –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ GDPR: –∑–∞–ø–∏—Å —É —Å—Ö–æ–≤–∏—â–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ª–∏—à–µ –∑–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∑–≥–æ–¥–∏.
 * * @function useGameResults
 * @param {string} userId - –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.
 * @returns {Object} –û–±'—î–∫—Ç, —â–æ –º—ñ—Å—Ç–∏—Ç—å:
 * - {Array} results: –°–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö —ñ–≥–æ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
 * - {Function} addResult: –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.
 * - {Function} getLevelStats: –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ä—ñ–≤–Ω—è—Ö —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ.
 */
export const useGameResults = (userId) => {
    const GAME_RESULTS_KEY = GAME_RESULTS_KEY_PREFIX + userId; 

    /**
     * –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ —Ñ–∞–π–ª—É cookie, —â–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –∑–≥–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
     * @returns {boolean} True, —è–∫—â–æ –∑–≥–æ–¥–∞ –Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è LocalStorage –Ω–∞–¥–∞–Ω–∞.
     */
    const hasConsent = () => {
        return document.cookie.split('; ').some(row => row.trim().startsWith('wordSearchUserConsent=true'));
    };

    const [results, setResults] = useState(() => {
        const saved = localStorage.getItem(GAME_RESULTS_KEY); 
        if (!saved) return [];
        
        try {
            const parsed = JSON.parse(saved);
            return Array.isArray(parsed) ? parsed : [];
        } catch (e) {
            console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:", e);
            return [];
        }
    });

    /**
     * –î–æ–¥–∞—î –Ω–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥—Ä–∏ –¥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É —Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∑ LocalStorage –ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∑–≥–æ–¥–∏.
     * @param {Object} result - –û–±'—î–∫—Ç –∑ –¥–∞–Ω–∏–º–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ—ó –≥—Ä–∏ (—á–∞—Å, –ø—Ä–æ–≥—Ä–µ—Å, —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å).
     */
    const addResult = (result) => {
        setResults(prev => {
            const newResults = [...prev, {
                ...result,
                id: Date.now(),
                date: new Date().toLocaleString()
            }];

            if (hasConsent()) {
                localStorage.setItem(GAME_RESULTS_KEY, JSON.stringify(newResults));
                console.log(`üíæ –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è ${userId}`);
            } else {
                console.log("üö´ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ: –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –Ω–∞–¥–∞–≤ –∑–≥–æ–¥–∏ –Ω–∞ –∫—É–∫—ñ");
            }

            return newResults;
        });
    };

    /**
     * –û–±—á–∏—Å–ª—é—î –∞–≥—Ä–µ–≥–æ–≤–∞–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—Ö —ñ–≥–æ—Ä, –Ω–∞–π–∫—Ä–∞—â–∏–π —á–∞—Å) –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è.
     * @returns {Object} –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª—é—á–∞—Ö: easy, medium, hard.
     */
    const getLevelStats = () => {
        const levelStats = {
            easy: { completed: 0, bestTime: null, totalGames: 0 },
            medium: { completed: 0, bestTime: null, totalGames: 0 },
            hard: { completed: 0, bestTime: null, totalGames: 0 }
        };

        results.forEach(result => {
            const level = result.difficulty;
            if (!levelStats[level]) return; 

            levelStats[level].totalGames++;
            
            if (result.progress === 100) {
                levelStats[level].completed++;
                if (!levelStats[level].bestTime || result.time &lt; levelStats[level].bestTime) {
                    levelStats[level].bestTime = result.time;
                }
            }
        });

        return levelStats;
    };

    return {
        results,
        addResult,
        getLevelStats
    };
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Button">Button</a></li><li><a href="global.html#useGameResults">useGameResults</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sat Feb 28 2026 18:53:26 GMT+0200 (–∑–∞ —Å—Ö—ñ–¥–Ω–æ—î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º —á–∞—Å–æ–º)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
